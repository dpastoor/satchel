<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>carry around your data  • satchel</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">satchel</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<div id="satchel" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#satchel" class="anchor"> </a>Satchel</h1></div>
<p>Carry around your data</p>
<p>See a project example in action at <a href="https://github.com/dpastoor/satchel_examples">satchel_examples</a></p>
<div id="philosophy" class="section level2">
<h2 class="hasAnchor">
<a href="#philosophy" class="anchor"> </a>Philosophy</h2>
<p>The driving factor behind satchel is helping to solve two issues that become more and more painful as projects get larger:</p>
<ol style="list-style-type: decimal">
<li><p>a project should be split into multiple files to keep knit times manageable and a semblance of organization. This fits nicely with <a href="https://github.com/rstudio/bookdown">bookdown</a> as a mechanism for organizing Rmd’s.</p></li>
<li><p>Reproducible research should strive to keep code embedded in reports</p></li>
</ol>
<div id="how-does-satchel-mitigate-these-pain-points" class="section level4">
<h4 class="hasAnchor">
<a href="#how-does-satchel-mitigate-these-pain-points" class="anchor"> </a>How does <code>satchel</code> mitigate these pain points?</h4>
<p>First, it allows an easy mechanism for transferring data or objects between Rmd files so that there is only a single source of ‘truth’ for any piece of code (minimize copy and pasting code between files). For example, given raw data that needs consistent modifications before use in multiple files, the modifications should occur once, and the intermediate object be shared to the other files. This allows a single source of the change, so any future modifications will be properly propogated to all other instances.</p>
<p>Second, an ‘elephant in the room’ of literate programming, is the the progression of a project does not proceed in a straight line, instead more like: <img src="assets/success.jpg" alt="success"></p>
<p>The total progression should be tracked in the <code>lab-notebook</code> to document false leads etc. When trying to create a final report though, only specific components will be retained. Satchel allows the necessary data/objects/etc to be easily saved from the lab-notebook Rmd files into a location that is suitable to be pulled into a separate final-report. This further allows the lab-notebook format to be separated from the final reports (eg Rmd files in lab-notebook, and Rnw files for final report for more control over layout, references, etc.)</p>
</div>
</div>
<div id="using-satchel" class="section level2">
<h2 class="hasAnchor">
<a href="#using-satchel" class="anchor"> </a>Using Satchel</h2>
<div id="initialization" class="section level3">
<h3 class="hasAnchor">
<a href="#initialization" class="anchor"> </a>Initialization</h3>
<p>Satchel’s must be initialized by calling <code>Satchel$new(...)</code></p>
<p>For example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(satchel)

satchel &lt;-<span class="st"> </span>Satchel$<span class="kw">new</span>(<span class="st">"&lt;namespace&gt;"</span>, <span class="st">"&lt;path/to/satchel/tree&gt;"</span>)</code></pre></div>
<p>The resulting object can have any name, though the convention is to use <code>satchel</code> if only creating one, and <code>satchel_&lt;additional_identifier&gt;</code> if using multiple in a single file</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">other_name &lt;-<span class="st"> </span>Satchel$<span class="kw">new</span>(<span class="st">"&lt;namespace&gt;"</span>, <span class="st">"&lt;path/to/satchel/tree&gt;"</span>)</code></pre></div>
<p>Multiple satchel nodes can be created in a single file</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(satchel)

satchel_data &lt;-<span class="st"> </span>Satchel$<span class="kw">new</span>(<span class="st">"&lt;namespace&gt;"</span>, <span class="st">"&lt;path/to/satchel/tree&gt;"</span>)
satchel_plots &lt;-<span class="st"> </span>Satchel$<span class="kw">new</span>(<span class="st">"&lt;other-namespace&gt;"</span>, <span class="st">"&lt;path/to/satchel/tree&gt;"</span>)
<span class="co"># completely different tree</span>
report_satchel &lt;-<span class="st"> </span>Satchel$<span class="kw">new</span>(<span class="st">"&lt;namespace&gt;"</span>, <span class="st">"&lt;finalreport_path/to/satchel/tree&gt;"</span>) </code></pre></div>
<p>This can be useful to save certain objects to pass around between documents in the lab-notebook, but separately save out key objects for report(s), presentation(s), etc</p>
</div>
<div id="saving-objects" class="section level3">
<h3 class="hasAnchor">
<a href="#saving-objects" class="anchor"> </a>Saving objects</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">satchel$<span class="kw">save</span>(&lt;obj&gt;)
satchel$<span class="kw">save</span>(&lt;obj&gt;, <span class="dt">data_name =</span> <span class="st">"&lt;other name&gt;"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">satchel$<span class="kw">save</span>(Theoph) <span class="co"># will be saved as Theoph</span>
satchel$<span class="kw">save</span>(Theoph, <span class="st">"pk_theoph"</span>) <span class="co"># will be saved as pk_theoph</span></code></pre></div>
<p>The <code>data_name</code> is key for use in pipelines, which do not retain the object names being passed</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># these will break as the name cannot be deparsed</span>
satchel$<span class="kw">save</span>(Theoph %&gt;%<span class="st"> </span><span class="kw">mutate</span>(<span class="dt">REP =</span> <span class="dv">1</span>)) <span class="co"># would try to save with the literal name `Theoph %&gt;% mutate(REP = 1)</span>
Theoph %&gt;%<span class="st"> </span><span class="kw">mutate</span>(<span class="dt">REP =</span> <span class="dv">1</span>) %&gt;%<span class="st"> </span>satchel$<span class="kw">save</span>() <span class="co"># would save with the name `.`</span>

<span class="co"># Instead, specify a name</span>
Theoph %&gt;%<span class="st"> </span><span class="kw">mutate</span>(<span class="dt">REP =</span> <span class="dv">1</span>) %&gt;%<span class="st"> </span>satchel$<span class="kw">save</span>(<span class="st">"Theoph"</span>)</code></pre></div>
<p>At the end of an Rmarkdown file, you can get the information for all saved object during the session</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">satchel$<span class="kw">report</span>()</code></pre></div>
</div>
<div id="using-objects-from-other-places" class="section level3">
<h3 class="hasAnchor">
<a href="#using-objects-from-other-places" class="anchor"> </a>Using objects from other places</h3>
<p>Objects saved from other files can be accessed with <code>satchel$use(&lt;object_name&gt;, &lt;namespace&gt;)</code></p>
<p>Given an data frame called safety_data saved in the safety namespace specified in another file, saved by:</p>
<pre><code>satchel &lt;- Satchel$new("safety", "satchel")
...
satchel$save(safety_data)</code></pre>
<p>In the new file, the safety_data could be acquired via:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">satchel &lt;-<span class="st"> </span>Satchel$<span class="kw">new</span>(<span class="st">"analysis"</span>, <span class="st">"satchel"</span>)
...
safety_data &lt;-<span class="st"> </span>satchel$<span class="kw">use</span>(<span class="st">"safety_data"</span>)</code></pre></div>
<p>Satchel is smart enough to scan all the namespaces for an object called safety_data and pull it in. However, if there are multiple safety_data objects saved, an error will occur, and the namespace must be explicitly set.</p>
<p>For example, in a third file, given:</p>
<pre><code>satchel &lt;- Satchel$new("other_safety", "satchel")
...
satchel$save(safety_data)</code></pre>
<p>As <code>safety_data</code> is present in both <code>safety</code> and <code>other_safety</code> namespaces, to use it you must specify which namespace you want to refer to:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">safety_data &lt;-<span class="st"> </span>satchel$<span class="kw">use</span>(<span class="st">"safety_data"</span>, <span class="st">"safety"</span>)</code></pre></div>
<p>To see what is available across the entire tree, use <code>satchel$available()</code></p>
</div>
<div id="previewing-objects" class="section level3">
<h3 class="hasAnchor">
<a href="#previewing-objects" class="anchor"> </a>Previewing objects</h3>
<p>For ongoing analyses, sometimes it is convenient to get a look at the data you are interested in, without loading the entire object, especially when dealing with larger datasets.</p>
<p><code>Satchel</code> automatically keeps a <code>head()</code> of certain objects (dataframes, matrices, vectors) so that they can be previewed, rather than pulling in the entire object.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">satchel$<span class="kw">preview</span>(<span class="st">"safety_data"</span>)</code></pre></div>
<p>As this does not need to pull in the entire file, access will be fast and light on memory.</p>
</div>
</div>
<div id="patterns" class="section level2">
<h2 class="hasAnchor">
<a href="#patterns" class="anchor"> </a>Patterns</h2>
<div id="saving-all-files-in-a-folder-into-a-satchel" class="section level3">
<h3 class="hasAnchor">
<a href="#saving-all-files-in-a-folder-into-a-satchel" class="anchor"> </a>saving all files in a folder into a satchel</h3>
<p>TODO</p>
</div>
</div>
<div id="advanced" class="section level2">
<h2 class="hasAnchor">
<a href="#advanced" class="anchor"> </a>Advanced</h2>
<div id="access-behavior" class="section level3">
<h3 class="hasAnchor">
<a href="#access-behavior" class="anchor"> </a>access behavior</h3>
<p>when ‘using’ an object, the default behavior is to re-scan the satchel tree to make sure the object is available and current. This is especially important if using multiple satchel’s concurrently, when new objects are generated after another is initialized, it may not be aware of those updates. This continual scanning may not be ideal if the desire is to load a number of objects on after another (for example, pulling in a bunch to a list). To manually control the behavior, you can turn off refreshing via <code>satchel$auto_refresh(FALSE)</code></p>
<p>The overall, optimized flow might be something like:</p>
<pre><code>satchel$auto_refresh(FALSE) 
satchel$available() # manually query the tree to update it
satchel$use(...)
satchel$use(...)
satchel$use(...)
satchel$use(...)
satchel$auto_refresh(TRUE) # turn auto-refresh back on</code></pre>
<p>Keep in mind, this is almost guaranteed to be a unneeded optimization, as scanning the file tree takes microseconds in most cases. However for certain very large projects, or projects with thousands of very small objects saved out, it could play a role.</p>
<p>HINT: if you find yourself saving many small, related objects, it may be better to collapse the objects into a list then just save the single list object.</p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Devin Pastoor <br><small class="roles"> Author, maintainer </small> </li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Devin Pastoor.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
